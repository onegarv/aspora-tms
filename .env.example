# ─────────────────────────────────────────────────────────────────────────────
# Aspora TMS — Environment Variable Template
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# .env is git-ignored and must never be committed.
# ─────────────────────────────────────────────────────────────────────────────

# ── Database ──────────────────────────────────────────────────────────────────
ASPORA_POSTGRES_URL=postgresql+asyncpg://postgres:password@localhost:5432/aspora_tms
ASPORA_TIMESCALE_URL=postgresql+asyncpg://postgres:password@localhost:5433/aspora_ts

# ── Message Bus ───────────────────────────────────────────────────────────────
ASPORA_REDIS_URL=redis://localhost:6379/0
ASPORA_BUS_TYPE=redis                     # "redis" | "kafka"
ASPORA_KAFKA_BROKERS=localhost:9092       # only needed if BUS_TYPE=kafka

# ── Auth / Security ───────────────────────────────────────────────────────────
# IMPORTANT: generate a strong secret for production, e.g.:
#   python3 -c "import secrets; print(secrets.token_hex(32))"
ASPORA_JWT_SECRET=change-me-in-production
ASPORA_JWT_ALGORITHM=HS256

# ── FX Risk Limits ────────────────────────────────────────────────────────────
ASPORA_MAX_SINGLE_DEAL_USD=5000000        # Max per FX deal (USD equivalent)
ASPORA_MAX_OPEN_EXPOSURE_PCT=0.30         # Max unhedged exposure after 2 PM
ASPORA_STOP_LOSS_PAISE=5                  # Halt if blended rate drifts > 5 paise vs RBI ref
ASPORA_FLASH_CRASH_THRESHOLD_PCT=0.005    # 0.5% intra-day move triggers freeze

# ── Operations / Fund Movement ────────────────────────────────────────────────
ASPORA_PREFUNDING_BUFFER_PCT=0.10         # Safety buffer on top of shortfall (10%)
ASPORA_MAKER_CHECKER_TIMEOUT_MIN=30       # Auto-escalate if not approved within 30 min
ASPORA_DUAL_CHECKER_THRESHOLD_USD=10000000  # Transfers above this need 2 approvers
ASPORA_DUPLICATE_WINDOW_HOURS=2           # Reject duplicate idempotency key within 2 h

# ── Confirmation SLAs ─────────────────────────────────────────────────────────
ASPORA_FEDWIRE_SLA_MIN=30
ASPORA_CHAPS_SLA_MIN=120
ASPORA_SEPA_SLA_MIN=240
ASPORA_SWIFT_SLA_MIN=480

# ── Banking Window Alert ──────────────────────────────────────────────────────
ASPORA_WINDOW_CLOSING_ALERT_MIN=30        # Alert N minutes before cut-off

# ── Forecast ──────────────────────────────────────────────────────────────────
ASPORA_FORECAST_LOOKBACK_WEEKS=8
ASPORA_MAX_TOTAL_MULTIPLIER=2.5

# ── Alerting ──────────────────────────────────────────────────────────────────
ASPORA_ALERT_EMAIL=treasury@aspora.com
ASPORA_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
